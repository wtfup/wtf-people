# GitHub Actions Secrets Setup

For CI/CD to work, configure these secrets in your GitHub repository:

**Settings > Secrets and variables > Actions > New repository secret**

## Required Secrets

| Secret Name | Value | Description |
|-------------|-------|-------------|
| `AZURE_VM_IP` | `52.140.65.217` | Azure VM public IP address |
| `SSH_PRIVATE_KEY` | (contents of ~/.ssh/id_rsa) | SSH private key for VM access |

## Getting the SSH Private Key

The SSH key was auto-generated by Azure CLI during VM creation. To retrieve it:

```bash
# On your local machine (where you ran az vm create)
cat ~/.ssh/id_rsa
```

Copy the entire contents including `-----BEGIN OPENSSH PRIVATE KEY-----` and `-----END OPENSSH PRIVATE KEY-----` lines.

## Workflows

### Auto Deploy (deploy.yml)
- Triggers on push to `main` branch
- Pulls latest code and runs deployment
- Can be manually triggered with actions: deploy, restart, backup

### Scheduled Backup (scheduled-backup.yml)
- Runs daily at 2 AM UTC (7:30 AM IST)
- Creates database and site backups
- Can be manually triggered

## Manual Deployment

To manually trigger a deployment:
1. Go to Actions tab in GitHub
2. Select "Deploy WTF People HRMS"
3. Click "Run workflow"
4. Select action type
5. Click "Run workflow"
